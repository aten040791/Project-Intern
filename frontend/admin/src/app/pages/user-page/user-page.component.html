<div class="container-xxl flex-grow-1 container-p-y">
  <div class="content">
    <div class="page-list">
      <div class="card">
        <div
          class="page-header flex justify-content-between align-items-center p-24 border-bottom"
        >
          <div class="title flex direction-col">
            <h2 class="my-0">Users</h2>
          </div>
          <button
            class="btn btn-secondary delete-item btn-danger me-3 ms-auto"
            tabindex="0"
            aria-controls="DataTables_Table_0"
            type="button"
            data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasAddUser"
            (click)="toggleDelete()"
          >
            <span
              ><i class="fa-regular fa-trash-can"></i
              ><span class="d-none d-sm-inline-block ms-2"
                >Delete All</span
              ></span
            >
          </button>
          <button
            class="btn btn-secondary add-item btn-primary"
            tabindex="0"
            aria-controls="DataTables_Table_0"
            type="button"
            data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasAddUser"
            (click)="toggleShow()"
          >
            <span>
              <i class="bx bx-plus me-0 me-sm-1"></i>
              <span class="d-none d-sm-inline-block">Add New User</span>
            </span>
          </button>
        </div>
        <div class="card-header border-bottom">
          <div class="row justify-content-between">
            <div class="col-md-4 col-4 px-0">
              <div class="search-input ps-re">
                <a class="ps-ab p-8-11 fs-18 fl-r opacity-08" href="#">
                  <i class="fa-solid fa-magnifying-glass bg-navbar-theme"></i>
                </a>
                <input
                  class="form-control ms-2"
                  type="text"
                  value=""
                  placeholder="Search username, email or phone"
                  name="value"
                />
              </div>
            </div>
            <div class="col-md-1 col-2">
              <div class="dataTables_length" id="DataTables_Table_0_length">
                <select
                  name="DataTables_Table_0_length"
                  aria-controls="DataTables_Table_0"
                  class="form-select"
                  (change)="handleItemsPerPage($event)"
                >
                  <option value="10" selected>10</option>
                  <option value="20">20</option>
                  <option value="50">50</option>
                  <option value="100">100</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        <div class="table-responsive text-nowrap">
          <table
            class="table table-striped border-bottom datatables-users dataTable no-footer dtr-column"
          >
            <thead>
              <tr>
                <th
                  class="sorting_disabled dt-checkboxes-cell dt-checkboxes-select-all"
                  rowspan="1"
                  colspan="1"
                  style="width: 18px"
                  data-col="1"
                  aria-label=""
                >
                  <input
                    id="select-all"
                    type="checkbox"
                    class="form-check-input"
                    (change)="handleCheckBox($event)"
                  />
                </th>
                <th>ID</th>
                <th>Username</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Role</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody class="table-border-bottom-0">
              <tr
                *ngFor="
                  let paginatedItem of paginatedItems;
                  let even = even;
                  let odd = odd
                "
                [ngClass]="{ odd: odd, even: even }"
              >
                <td class="dt-checkboxes-cell">
                  <input
                    type="checkbox"
                    class="dt-checkboxes form-check-input"
                  />
                </td>
                <td>{{ paginatedItem.id }}</td>
                <td>{{ paginatedItem.username }}</td>
                <td>{{ paginatedItem.email }}</td>
                <td>{{ paginatedItem.phone }}</td>
                <td>{{ paginatedItem.role }}</td>
                <td>
                  <span
                    class="badge me-1"
                    [ngClass]="{
                      'bg-label-success': paginatedItem.status === 'active',
                      'bg-label-secondary': paginatedItem.status === 'inactive'
                    }"
                  >
                    {{ paginatedItem.status }}
                  </span>
                </td>
                <td>
                  <div class="d-flex align-items-center">
                    <button
                      class="btn btn-sm btn-icon dropdown-toggle hide-arrow"
                      data-bs-toggle="dropdown"
                      aria-expanded="false"
                    >
                      <i
                        class="bx bx-dots-vertical-rounded menu-icon tf-icons"
                      ></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end m-0" style="">
                      <a
                        routerLink="/users/view-detail/{{ paginatedItem.id }}"
                        class="dropdown-item"
                        (click)="initItem(paginatedItem)"
                      >
                        <i class="fa-regular fa-eye"></i>
                        <span class="ms-1">Details</span>
                      </a>
                      <div class="dropdown-divider"></div>
                      <a
                        href="javascript:;"
                        class="dropdown-item text-primary delete-record align-items-center fs-15"
                        (click)="toggleEdit(); initItem(paginatedItem)"
                      >
                        <i class="fa-regular fa-pen-to-square"></i>
                        <span class="ms-1">Edit</span>
                      </a>
                      <div class="dropdown-divider"></div>
                      <a
                        href="javascript:;"
                        class="dropdown-item text-danger delete-record align-items-center fs-15"
                        (click)="toggleDelete()"
                      >
                        <i class="fa-regular fa-trash-can"></i>
                        <span class="ms-1">Delete</span>
                      </a>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <app-pagination
          [items]="items"
          [itemsPerPage]="itemsPerPage"
          (paginatedItems)="handlePaginatedItems($event)"
        ></app-pagination>
      </div>
    </div>
  </div>
</div>

<!-- add user -->
<app-add-user [isShow]="isShow" (close)="toggleShow()"></app-add-user>
<app-delete [isDelete]="isDelete" (close)="toggleDelete()"></app-delete>
<app-edit-user [isShowEdit]="isShowEdit" (close)="toggleEdit()"></app-edit-user>
